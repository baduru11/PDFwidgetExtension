<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    :root {
      --bg: #121212;
      --card: #1e1e1e;
      --text: #e0e0e0;
      --accent: #0a84ff;
      --border: #333;
      --header-bg: #1a1a1a;
      --hover-bg: rgba(255, 255, 255, 0.05);
      --selected-bg: rgba(10, 132, 255, 0.15);
    }
    body {
      background: var(--bg); color: var(--text);
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      margin: 0; padding: 12px;
      display: flex; flex-direction: column;
      width: 400px; height: 600px; box-sizing: border-box;
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .header {
      display: flex; gap: 8px;
      align-items: center; margin-bottom: 10px;
    }

    .breadcrumbs {
      display: flex; flex-wrap: nowrap; gap: 4px;
      font-size: 11px; font-weight: 600;
      text-transform: uppercase; color: #888;
      flex-grow: 1; overflow: hidden;
      white-space: nowrap;
    }
    .breadcrumb-item { cursor: pointer; transition: 0.2s; }
    .breadcrumb-item:hover { color: var(--accent); }

    .search-container { display: flex; gap: 6px; margin-bottom: 8px; }
    #search-bar {
      flex-grow: 1; background: var(--card); border: 1px solid var(--border);
      color: white; padding: 8px 10px; border-radius: 6px;
      box-sizing: border-box; outline: none; transition: 0.2s;
      font-size: 13px;
    }
    #search-bar:focus { border-color: var(--accent); box-shadow: 0 0 0 2px rgba(10, 132, 255, 0.1); }

    /* Explorer-style Table */
    .explorer-header {
      display: grid;
      grid-template-columns: 1fr 90px;
      gap: 8px;
      padding: 8px 12px;
      background: var(--header-bg);
      border: 1px solid var(--border);
      border-bottom: none;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      color: #666;
      border-radius: 8px 8px 0 0;
    }
    .header-col {
      cursor: pointer;
      display: flex;
      align-items: center;
      user-select: none;
    }
    .header-col:hover { color: var(--text); }
    .header-col.active { color: var(--accent); }
    .header-col[data-sort="date"] { justify-content: flex-end; }

    .file-list {
      flex-grow: 1; overflow-y: auto; list-style: none;
      padding: 0; margin: 0;
      border: 1px solid var(--border);
      border-radius: 0 0 8px 8px;
    }
    #recent-list { border-radius: 8px; margin-bottom: 8px; }

    .file-item {
      display: grid;
      grid-template-columns: 1fr 90px;
      padding: 10px 12px;
      border-bottom: 1px solid #1a1a1a;
      cursor: pointer;
      font-size: 12px;
      align-items: center;
      transition: background 0.1s, transform 0.05s;
      position: relative;
    }
    .file-item:hover { background: var(--hover-bg); }
    .file-item:active { transform: scale(0.995); }
    .file-item.selected { background: var(--selected-bg); border-left: 2px solid var(--accent); }
    .file-item:last-child { border-bottom: none; }

    .file-name { overflow: hidden; display: flex; flex-direction: column; gap: 2px; min-width: 0; }
    .name-row { display: flex; align-items: center; gap: 8px; }
    .name-text { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .file-path { font-size: 9px; color: #555; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .file-date { font-size: 10px; color: #666; white-space: nowrap; text-align: right; }

    .folder .file-name { color: var(--accent); font-weight: 500; }
    .highlight { color: #fff; background: rgba(10, 132, 255, 0.4); border-radius: 2px; font-weight: 600; }

    .section-title {
      font-size: 10px; font-weight: 800; color: #555;
      text-transform: uppercase; margin: 8px 0 6px 4px;
      display: flex; justify-content: space-between; align-items: baseline;
    }

    .btn-primary {
      background: var(--accent); color: white; border: none;
      padding: 6px 10px; border-radius: 6px; cursor: pointer;
      font-weight: 600; font-size: 11px; transition: 0.2s;
    }
    .btn-primary:hover { filter: brightness(1.1); }

    .btn-icon {
      background: transparent; color: #666; border: 1px solid transparent;
      padding: 6px; border-radius: 6px; cursor: pointer;
      font-size: 14px; display: flex; align-items: center; justify-content: center;
      transition: 0.2s;
    }
    .btn-icon:hover { color: var(--text); background: var(--card); border-color: var(--border); }

    /* Custom Context Menu */
    #context-menu {
      position: fixed; display: none; z-index: 1000;
      background: #252525; border: 1px solid #333; border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5); padding: 5px 0; min-width: 140px;
    }
    .menu-item {
      padding: 8px 12px; font-size: 12px; color: #ccc; cursor: pointer;
      display: flex; align-items: center; gap: 10px; transition: 0.1s;
    }
    .menu-item:hover { background: var(--accent); color: white; }
    .menu-item.danger:hover { background: #ff453a; }
    .menu-sep { height: 1px; background: #333; margin: 5px 0; }

    /* Refresh Animation */
    @keyframes spin { 100% { transform: rotate(360deg); } }
    .spinning { animation: spin 0.6s linear infinite; }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 4px; height: 4px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: #444; }
    * { scrollbar-width: thin; scrollbar-color: #333 transparent; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(2px); } to { opacity: 1; transform: translateY(0); } }
    .animate-in { animation: fadeIn 0.15s ease-out forwards; }
  </style>
</head>
<body>
  <div class="header">
    <button id="btn-back" class="btn-icon" title="Go Back">&#8592;</button>
    <div id="breadcrumbs" class="breadcrumbs"></div>
    <button id="btn-refresh" class="btn-icon" title="Refresh Folder">&#8635;</button>
    <button id="btn-select" class="btn-primary">Change &#128194;</button>
  </div>

  <div class="search-container">
    <input type="text" id="search-bar" placeholder="Search PDFs...">
  </div>

  <div id="recent-section" style="display: none;">
    <div class="section-title">Recent</div>
    <ul id="recent-list" class="file-list"></ul>
  </div>

  <div class="section-title">
    <span>Files & Folders</span>
    <span id="global-status" style="font-size: 8px; opacity: 0.6;"></span>
  </div>

  <div class="explorer-header">
    <div class="header-col" data-sort="name">Name <span class="sort-icon"></span></div>
    <div class="header-col" data-sort="date">Date <span class="sort-icon"></span></div>
  </div>

  <ul id="file-list" class="file-list"></ul>

  <div id="context-menu">
    <div class="menu-item" data-action="open"><span>&#128194;</span> Open</div>
    <div class="menu-sep"></div>
    <div class="menu-item" data-action="rename"><span>&#9999;&#65039;</span> Rename</div>
    <div class="menu-item" data-action="copyname"><span>&#128203;</span> Copy Name</div>
    <div class="menu-sep"></div>
    <div class="menu-item danger" data-action="delete"><span>&#128465;&#65039;</span> Delete</div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
